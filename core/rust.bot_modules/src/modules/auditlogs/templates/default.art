//lang:lang_lua
function (args) 
    -- Make the embed
    local embed = {
        title = args.event_titlename,
        description = "",
        fields = {}
    }

    -- Add the fields to the description
    for key, value in pairs(args.fields) do
        local final_value = "N/A"
        if value ~= nil then
            local formatted_value, err = __ar_modules.message.format_gwevent_categorized_field(value)

            if err ~= nil then
                error("Error formatting categorized field" .. err)
            end

            final_value = formatted_value
        end

        embed.description = embed.description .. "**" .. key:gsub("_", " "):upper() .. "**: " .. final_value .. "\n"
    end

    local message = __ar_modules.message.new_message()
    message:embeds {embed}

    return message
end